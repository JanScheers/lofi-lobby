---
import Layout from '../components/Layout.astro';
import GameCard from '../components/GameCard.astro';
import gamesData from '../data/games.json';

const games = gamesData.games;
---

<Layout title="Home">
  <section class="hero">
    <h1>Welcome to Lofi Lobby</h1>
  </section>

  <section class="games-section">
    {games.length === 0 ? (
      <p class="no-games">No games available yet. Add some using the update script!</p>
    ) : (
      <div class="games-grid">
        {games.map((game) => (
          <GameCard
            id={game.id}
            name={game.name}
            type={game.type as 'html' | 'renpy' | 'rpgmaker' | 'download-only'}
            description={game.description}
            thumbnail={game.thumbnail}
            playable={game.playable}
            entryPoint={game.entryPoint ?? 'index.html'}
            data-type={game.type}
            data-name={game.name}
            data-updated={game.lastUpdated}
          />
        ))}
      </div>
    )}
  </section>
</Layout>

<style>
  @keyframes hero-enter {
    from {
      opacity: 0;
      transform: translateY(12px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .hero {
    text-align: center;
    padding: 2rem 0 3rem;
  }

  .hero h1 {
    font-family: var(--font-display);
    font-size: 2.75rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    color: #fff;
    animation: hero-enter 0.5s ease-out forwards;
  }

  .games-section {
    margin-bottom: 2rem;
  }

  .games-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1rem;
    padding: 0 1rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .no-games {
    text-align: center;
    color: var(--color-text-muted);
    padding: 4rem 0;
  }
</style>
